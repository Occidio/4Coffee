<!doctype html>
<html>
<head>
	<title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
	<script type="text/javascript">
		function GetGraph()
		{
		    var xmlHttp = new XMLHttpRequest();
		    xmlHttp.open( "GET", "http://localhost:3000/GetGraph", false ); // false for synchronous request
		    xmlHttp.send( );
			
			var arRayception = JSON.parse(xmlHttp.responseText);
			var data = {
	            labels: ["0800", "0815", "0830", "0845", "0900", "0915", "0930", "0945", "1000", "1015", "1030", "1045", "1100", "1115", "1130", "1145", "1200", "1215", "1230", "1245","1300", "1315", "1330", "1345","1400", "1415", "1430", "1445","1500", "1515", "1530", "1545","1600"],
	            datasets: [
	                {
	                    label: "Averages",
	                    fillColor: "rgba(220,220,220,0.2)",
	                    strokeColor: "rgba(220,220,220,1)",
	                    pointColor: "rgba(220,220,220,1)",
	                    pointStrokeColor: "#fff",
	                    pointHighlightFill: "#fff",
	                    pointHighlightStroke: "rgba(220,220,220,1)",
	                    data: arRayception[0]
	                },
	                {
	                    label: "Today",
	                    fillColor: "rgba(151,187,205,0.2)",
	                    strokeColor: "rgba(151,187,205,1)",
	                    pointColor: "rgba(151,187,205,1)",
	                    pointStrokeColor: "#fff",
	                    pointHighlightFill: "#fff",
	                    pointHighlightStroke: "rgba(220,220,220,1)",
	                    data: arRayception[1]
	                }
	            ]
	        };

	        var ctx = document.getElementById("myChart").getContext("2d");
	        var myNewChart = new Chart(ctx).Line(data);
		}
	</script>
</head>
<body>
<h1 style="text-align: center;">4Coffee queue</h1>

<table border="0" cellpadding="0" cellspacing="0" style="width:100%; height:80%; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);">
	<tbody>
<!-- 		<tr>
			<td style="width:60%">
			<h3>Queue times</h3>
			</td>
			<td>&nbsp;</td>
			<td style="width:40%">
			<h3>Submit a queue length</h3>
			</td>
		</tr> -->
		<tr>
			<td>
				<h3><u>Queue times</u>&nbsp;<input name="Button_Refresh" type="button" value="Refresh" onclick="GetGraph()" /></h3>
				&nbsp;
				<div id="div_Graph" style="border:1px solid #ccc; padding:5px 10px; width:80%; height:60%;" title="Queue Graph">
				    <canvas id="myChart" style="width:100%; height:100%;"></canvas>
				</div></td>
			<td>&nbsp;</td>
			<td>
				<u>Submit a queue length</u>
				&nbsp;
				<form action="http://localhost:3000/Log" method="post">
				<p>Date/time:&nbsp;<input name="Time" type="checkbox" />Use current date/time</p>

				<p>Approximate queue duration: 0<input name="ApproxTime" max="15" min="0" step="1" type="range" value="5" />15 minutes</p>

				<p>Coffee machine working?:&nbsp;<input name="CoffeeMachine" type="checkbox" /></p>

				<p>Card machine working?:&nbsp;<input name="CardMachine" type="checkbox" /></p>

				<p><input type="submit" value="Submit entry" /></p>
				</form>
			</td>
		</tr>
	</tbody>
</table>

<!-- <h3><u>Queue times</u>&nbsp;<input name="Button_Refresh" type="button" value="Refresh" onclick="GetGraph()" /></h3>

<div id="div_Graph" style="border:1px solid #ccc; padding:5px 10px; width:60%; height:60%;" title="Queue Graph">
    <canvas id="myChart" style="width:100%; height:100%;"></canvas>
</div>

<p>&nbsp;</p>

<details open=""><summary><u>Submit a queue length</u></summary>

<form action="http://localhost:3000/Log" method="post">
<p>Date/time:&nbsp;<input name="Time" type="checkbox" />Use current date/time</p>

<p>Approximate queue duration: 0<input name="ApproxTime" max="15" min="0" step="1" type="range" value="5" />15 minutes</p>

<p>Coffee machine working?:&nbsp;<input name="CoffeeMachine" type="checkbox" /></p>

<p>Card machine working?:&nbsp;<input name="CardMachine" type="checkbox" /></p>

<p><input type="submit" value="Submit entry" /></p>
</form>
</details> -->

</body>
</html>